V0.1
发布日期：2020-06-18
简述：第一版框架雏形，参考route思想，通过脚本传参引导至目标脚本运行。



V0.2
发布日期：2020-06-19
简述：参照Scrapy框架的设计思想，构造框架雏形。
新增：
    1.框架五个核心组件与三个内置对象
修复（改）：
    1.manage构建对象时传入脚本传参args对象
    2.微调整体架构，把所有业务代码归于business目录下，并调整route路径



V0.3
发布日期：2020-06-22
简述：为了更好应对多变的业务，增加中间件机制，同时为了记录程序运行情况，添加日志器。
新增：
    1.建造者中间件与下载器中间件
    2.日志器
    3.第一个非业务公共函数——print_log
修复（改）：
    1.manage构建对象时传入由脚本传参args对象与日志器对象组成的字典
    2.把在manager写死的参数全部抽离去config，设计是代码稳定后不需要修改manage只需要修改config
    3.微调函数与代码注释格式



V0.4
发布日期：2020-06-29
简述：优化引擎逻辑，优化引擎与各组件之间的协调，使其更适配项目的复杂性。
修复（改）：
    1.引擎开启的业务在config统一配置
    2.引擎通过读取config的配置，开启对应的业务



V0.5
发布日期：2020-07-03
简述：利用线程池实现异步任务，并添加各类写法校验。
新增：
    1.自定义异常类，用于校验继承重写的规范
修复（改）：
    1.同步任务改成异步任务



V1.0
发布日期：2020-07-09
简述：整个框架基本调通，正式版发布！
新增：
    1.services模块，全局服务模块，可在项目任何地方获取到公共服务
    2.公共日志器
修复（改）：
    1.合并manager，保留为main，main从此以后就为整个架构的入口
    2.把逝去的manager（默哀一秒钟）中校验脚本传参的逻辑抽离去services，使main更整洁
    3.脚本传参现在可以在services中获取了



V1.1
发布日期：2020-07-15
简述：修复了一些隐含问题，添加了一个MySQL连接工具包。
新增：
    1.MySQL连接池工具包
    2.新增account模块，用于存放各类服务的连接信息
    3.程序初始化时会自动连接account下的MySQL，可通过services获取对应的连接
修复（改）：
    1.修复了一个引擎中隐含的线程安全问题
    2.修复私有属性与方法的问题



V1.2
发布日期：2020-07-17
简述：引擎的架构流程添加了一个管道组件的流向，现在管道组件处理完数据后可以继续回调了。
修复（改）：
    1.管道可以通过返回一个请求对象，让引擎继续处理后续请求任务



V1.3
发布日期：2020-07-30
简述：丰满各个组件与工具包的业务逻辑，使更快速开发业务。
新增：
    1.工具包的非业务公共函数新增多个功能
    2.公共服务新增脚本运行时刻的datetime对象
    3.下载器组件新增web下载功能
    4.新增并发倍数的配置，并可通过脚本传参控制
    5.管道组件新增数据入库功能
    6.新增一个自定义异常类LackParameter
    7.新增第二个业务大类——网络爬虫（spider），第一个为游戏采集（game）
修复（改）：
    1.修复引擎中可能导致死锁的问题
    2.修复引擎初始化业务建造器可能报错的问题，使其更能正确指引业务错误，而不是报框架错误（这锅不背）
    3.彩蛋流程现在引流去彩蛋专用的函数，不再是可能被业务重写的函数



V1.3.1
发布日期：2020-07-31
简述：添加工厂模式，工具包添加小功能。
新增：
    1.现在可以通过修改factory文件的“工厂开关”实现“一键切换”配套配置
    2.公共函数添加base64编解码相关功能



V1.4
发布日期：2020-08-26
简述：添加了一些新功能，优化了一下组件的流程，添加了demo代码。
新增：
    1.新增工具包——Redis
    2.新增发送钉钉消息公共函数
    3.引擎现在会把捕获到的业务级或框架级错误发送钉钉告警了，并有时间间隔
    4.新增第三个业务大类——演示和调试（demo），并添加了三套demo代码，用于演示代码流程，还可以用于开发调试流程
修复（改）：
    1.管道现在也可以yield请求了



V1.4.1
发布日期：2020-08-26
简述：主要围绕线程安全的互斥锁做优化。
修复（改）：
    1.引擎用到互斥锁的地方改用with，使代码更简洁
    2.MySQL（连接去重）、Redis（连接去重）、日志器（钉钉告警）添加了互斥锁，保证线程安全
    3.把启动时刻的pid、ip、datetime对象合并到公共服务（services模块）的launch变量里，变为一个字典



V1.5
发布日期：2020-09-15
简述：加入游戏采集，把整个框架的流程根据游戏采集的流程做功能添加和流程优化。
新增：
    1.下载器新增“db”与“shell”方式，只能分别是从数据库获取数据和执行shell命令并获取返回数据
    2.新增引擎循环启动的流程，现在可以通过end_requests系列任务（在业务建造器编写对应函数）按顺序启动引擎，按顺序执行不同的业务
    3.管道添加基于游戏采集入库明细的功能，可以通过特定传参直接入库明细
    4.非公共业务函数添加运行shell命令的功能
    5.新增工具包——业务公公函数，并添加了几个游戏采集会用到的功能
    6.MySQL工具包的execute现在能传入args参数了，效果与原生args相同
    7.MySQL工具包的insert现在能添加ignore了，效果为“唯一键冲突则忽略”
    8.config配置里添加了一些游戏采集会用到的配置参数
修复（改）：
    1.非业务公共函数修改calculate_fp函数功能，现在可以算多种算法的特征值了
    2.把原本放在非业务公共函数的发送钉钉的功能，转去业务公共函数
    3.日志器现在发送钉钉消息会把报错原生报错信息也报出来了



V1.5.1
发布日期：2020-09-16
简述：考虑到下载器不支持每个业务单独定制（继承重写），但获取数据的情况复杂多变，比较大机会出错，因此加入一个可以处理下载器异常的机制。
新增：
    1.引擎现在会捕获下载器抛出的异常，把捕获到的异常交给建造器的downloader_error_callback方法，可继承重写，让每个业务可个性化处理下载器的异常



V1.5.2
发布日期：2020-09-21
简述：主要围绕Redis的取出与入库做新增与优化。
新增：
    1.下载器“db”方式添加从Redis获取数据
    2.管道入库新增入库Redis
    3.非业务公共函数添加时间戳格式化的功能
    4.Redis工具包新增list类型数据的操作
修复（改）：
    1.修复引擎在创造业务管道和业务中间件时可能出错的问题，如业务代码引起报错，则不再属于框架错误
    2.根据业务需求，把原先从game_money获取储值数据改成从stored_value_record获取，其余字段等参数也跟随修改
    3.储值数据根据上一条改动后，现在能获取IP地址了，也会入库相应数据



V1.5.3
发布日期：2020-09-23
简述：修复个性化多线程数量并没有生效的问题。
修复（改）：
    1.引擎中创建线程池时并没有传入线程数量限制参数，现在已修复，可以真正个性化定制线程数量了



V1.6
发布日期：2020-09-28
简述：添加ClickHouse数据库交互。
新增：
    1.新增工具包——ClickHouse
    2.下载器与管道添加ClickHouse对应的查询与入库，初始化服务也添加ClickHouse
修复（改）：
    1.Redis优化代码，抽取冗余代码



V1.7
发布日期：2020-10-13
简述：新增通用的游戏数据采集流程，简化大量业务代码。
新增：
    1.建造器组件新增通用的游戏数据采集流程的逻辑，引擎组件也添加对应的逻辑
    2.业务公共函数添加获取脚本传参的功能



V1.7.1
发布日期：2020-10-19
简述：添加只获取OSA配置的伺服器的数据的机制。
新增：
    1.建造器组件新增只获取OSA配置的伺服器的数据的逻辑
    2.业务公共函数添加构造获取OSA配置的伺服器的字典的方法
    3.业务公共函数的构造获取平台储值的字典的方法，添加可以根据伺服器获取数据的逻辑
修复（改）：
    1.彩蛋请求带数据改成test_data属性



V1.7.2
发布日期：2020-10-20
简述：小优化通用的游戏数据采集流程。
修复（改）：
    1.建造器组件在发起在线数据请求时，会把伺服器数据带上，放在meta参数，后续函数可通过response.meta获取到OSA伺服器配置
    2.现在解析在线数据，可以不需要带上time了，默认为引擎启动时间
    3.修复了一个servercode拼接SQL错误的BUG



V1.7.3
发布日期：2020-10-29
简述：下载器组件针对web方式增加限流保护机制。
新增：
    1.下载器组件的web方式增加限流保护机制代码



V1.7.4
发布日期：2020-10-30
简述：修复一些小问题。
修复（改）：
    1.引擎组件修复：在捕获到下载器抛出的异常后，现在可以再把请求对象添加给调度器
    2.修复了一个引擎组件在处理下载器抛出异常后可能会提前关闭引擎的潜在BUG
    3.MySQL工具包在插入数据时，如果values为空，则不再拼接SQL并插入数据
    4.添加工厂配置，控制本地测试环境不再发送钉钉消息



V1.8
发布日期：2020-11-19
简述：通用游戏采集流程添加自动转换时区，添加kafka。
新增：
    1.建造器组件添加通用游戏采集流程自定转换时区的功能
    2.工具包添加kafka连接



V1.8.1
发布日期：2020-12-02
简述：添加存放临时文件的目录。
新增：
    1.存放临时文件的目录
修复（改）：
    1.工具包网络请求的函数（request_get_response）添加可上传文件的post方法
    2.临时使用旧脚本做即时统计的逻辑代码抽离至业务公共函数，便于维护



V1.8.2
发布日期：2021-03-23
简述：为读取本地日志添加一些功能。
新增：
    1.下载器添加“file”方法，从本地文件中获取数据
    2.业务公共函数添加get_argv函数，获取脚本传参
    3.新增一个额外脚本传参“just-do”
    4.业务模块添加discard模块，用于存放弃用的业务
    5.通用游戏数据采集流程添加执行时间范围播报
修复（改）：
    1.业务公共函数time_quantum函数添加is_date参数



V1.8.3
发布日期：2021-04-02
简述：为自动采集更新明细时间更新机制。
新增：
    1.mysql工具包，insert方法增加dup_ac参数，用于判断是否启用唯一键冲突判断更新
修复（改）：
    1.自动采集流程，注册与登录数据入库时启用新增功能，更新明细时间



V1.8.4
发布日期：2021-05-21
简述：修复隐含BUG，并做一些小优化和添加小功能。
新增：
    1.工具包MySQL的insert方法现在能通过limit_line参数控制分批插入数据了
修复（改）：
    1.改动引擎循环启动可能没有正确加载请求的逻辑，修复隐含BUG
    2.业务公共函数send_ding现在可以发送自定义消息了，不再需要使用报错模板和带上报错对象
    3.日志器调用钉钉发送消息的方法根据以上做小改动



V1.9
发布日期：2021-08-03
简述：现在只需要在继承类时配置一个参数，游戏数据采集流程即可自动生成旧报表了！
新增：
    1.建造器添加__def_old_report方法与配套__new__方法和old_report属性，实现自动生成旧报表
修复（改）：
    1.业务公共函数old_analyse适配优化



V1.9.1
发布日期：2021-08-25
简述：游戏数据采集明细入库小优化。
修复（改）：
    1.管道组件自动分析并入库注册、登录、储值明细数据的逻辑中的os字段现在不再限于IOS与Android，会根据传入数据入库



V1.9.2
发布日期：2021-09-09
简述：新增入库行销数据af_spend的流程。
新增：
    1.建造器添加af_spend与af_spend_country两个方法，用于分析入库行销数据af_spend



V1.9.3
发布日期：2021-09-14
简述：增强从web方法获取数据的功能性。
修复（改）：
    1.下载器的web方法，is_json参数废弃，改成web_type参数，通过该参数控制返回web数据的类型
新增：
    1.现在下载器web方法可以通过web_type参数传入“xpath”解析成Element对象了



V1.10
发布日期：2021-09-18
简述：增加反查ip和os的功能，增加可个性化定制通用游戏数据采集流程部分数据的功能。
新增：
    1.建造器增加pegging_field属性，并增加对应逻辑，现在当原厂没有提供ip和os时可以反查了
    2.建造器增加auto_pass属性与auto_collection_personalized方法，可以在使用通用游戏数据采集流程时用于个性化定制部分数据采集
修复（改）：
    1.auto_online_collection方法变更成auto_collection_personalized方法，现在在线数据采集纳入个性化定制功能了
    2.业务公共函数u_pegging适配反查功能优化了一些逻辑
    3.管道略微优化一些变量与逻辑
    4.config略微优化一些变量
    5.业务公共函数get_argv现在可通过transform传参控制是否自动返回空字符串
    6.业务公共函数game_money_dict去掉e_point条件
    7.框架里的代码涉及到日期格式都改用config配置的格式
    8.建造器的auto_collection_personalized的meta属性改成dict类型，带上start、end和server



V1.10.1
发布日期：2021-09-24
简述：修复一个因业务编写错误而甩锅给框架错误的问题。
修复（改）：
    1.引擎在加载模块时多加一个捕获Exception异常，从而在加载业务模块时正确判定为业务级错误



V1.10.2
发布日期：2021-10-19
简述：建造器添加一些常用模块的接口，功能优化。
新增：
    1.建造器增加cf、cp、services、config四个常用模块的接口，现在业务建造器可以不再每次导入这些模块，可直接self使用
修复（改）：
    1.业务公共函数time_quantum增加偏移量用于延迟数据补充入库
    2.建造器的通用游戏数据采集流程的online，现在改成接收list数据，并且唯一键冲突会update（启用duplicates）online_count字段了



V1.10.3
发布日期：2021-11-17
简述：新增优化一些功能，修复引擎中潜在问题。
新增：
    1.增加一个额外参数--type（-t）
    2.现在建造器的start支持传入一个字符串了，可以启用特殊功能
    3.建造器的old_report参数现在可以通过传入int类型控制在指定编号的end_requests函数执行
修复（改）：
    1.业务公共函数get_argv现在传入单个key即返回该结果，不再需要dict映射结果
    2.修复引擎在初始化start_requests时捕获到异常却没发钉钉的问题
    3.优化通用的游戏数据采集流程入库明细时处理os的逻辑，更尽量保持原汁原味



V1.10.4
发布日期：2021-12-09
简述：新增查询数据库的小功能，优化通用储值查询统一来源问题。
新增：
    1.现在在通过“db”方式触发下载器时，可带上db_object参数，作为自定义数据库对象，查询数据
修复（改）：
    1.业务公共函数game_money_dict，现在查询结果的用户来源与地区会统一以注册平台账号时为准



V1.10.5
发布日期：2021-12-16
简述：新增支持SQLServer数据库的功能。
新增：
    1.工具包新增SQLServer，可支持连接SQLServer并执行SQL语句
    2.下载器db方法的db_type新增“else”类别，适配该版本的SQLServer数据库



V1.11
发布日期：2022-03-02
简述：以前生成OSA旧版报表需要调用一个Python2脚本，现在已整合到该框架并可以直接使用此功能了！
新增：
    1.建造器新增一系列方法，为生成OSA旧版报表的业务流程，详细使用方法见建造器内相关注释
    2.建造器“auto_game_parse”方法现在可以自定义game_code了
    3.非业务公共函数change_timezone现在可以直接输入和输出datetime对象了
    4.MySQL、ClickHouse等数据库现在可以通过“debug”参数控制打印最终SQL语句了
    5.现在默认管道组件在入库时可以通过“insert_limit”参数启用防死锁功能了
    6.现在下载器组件在使用“db”数据库时可以通过“db_limit”参数启用防死锁功能了
修复（改）：
    1.业务公共函数删除了“old_analyse”方法（生成旧版报表），原本功能由该版本建造器新增的相关模块代替
    2.建造器里大部分方法调换了顺序（没有修改逻辑），根据业务功能或方法性质放置在一起
